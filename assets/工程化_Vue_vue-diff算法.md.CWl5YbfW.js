import{_ as s,c as n,o as i,a7 as e}from"./chunks/framework.DDkSvsBP.js";const g=JSON.parse('{"title":"vue-diff算法","description":"","frontmatter":{},"headers":[],"relativePath":"工程化/Vue/vue-diff算法.md","filePath":"工程化/Vue/vue-diff算法.md","lastUpdated":1751078101000}'),l={name:"工程化/Vue/vue-diff算法.md"};function p(t,a,h,d,c,o){return i(),n("div",null,a[0]||(a[0]=[e(`<h1 id="vue-diff算法" tabindex="-1">vue-diff算法 <a class="header-anchor" href="#vue-diff算法" aria-label="Permalink to “vue-diff算法”">​</a></h1><h1 id="处理流程" tabindex="-1">处理流程 <a class="header-anchor" href="#处理流程" aria-label="Permalink to “处理流程”">​</a></h1><ol><li>处理头部的同类型节点</li><li>处理头部的同类型节点</li><li>处理头尾/尾头同类型的节点</li><li>处理新增的节点</li><li>处理更新的节点</li><li>处理需要删除的节点</li></ol><h1 id="图示" tabindex="-1">图示 <a class="header-anchor" href="#图示" aria-label="Permalink to “图示”">​</a></h1><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>vdom前 [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vdom后 [ 1, 9, 11, 7, 3, 4, 5, 6, 2, 10 ]</span></span></code></pre></div><h2 id="第一步-设置初始化值" tabindex="-1">第一步 设置初始化值 <a class="header-anchor" href="#第一步-设置初始化值" aria-label="Permalink to “第一步 设置初始化值”">​</a></h2><p>vdom前设置指针 oldLeft 指向第一个值, oldRight 指向最后一个值</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>oldLeft = 1;</span></span>
<span class="line"><span>oldRight = 10;</span></span></code></pre></div><p>vdom后设置指针 newLeft 指向第一个值, newRight 指向最后一个值</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>newLeft = 1;</span></span>
<span class="line"><span>newRight = 10;</span></span></code></pre></div><h2 id="第二步-对比头部" tabindex="-1">第二步 对比头部 <a class="header-anchor" href="#第二步-对比头部" aria-label="Permalink to “第二步 对比头部”">​</a></h2><p>对比oldLeft和newLeft的值相同,则指针后移动</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>oldLeft = 2;</span></span>
<span class="line"><span>oldRight = 10;</span></span>
<span class="line"><span>newLeft = 9;</span></span>
<span class="line"><span>newRight = 10;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[1,2,3,4,5,6,7,8,9,10]</span></span>
<span class="line"><span> [ 1, 9, 11, 7, 3, 4, 5, 6, 2, 10 ]</span></span></code></pre></div><h2 id="第三步-对比尾部" tabindex="-1">第三步 对比尾部 <a class="header-anchor" href="#第三步-对比尾部" aria-label="Permalink to “第三步 对比尾部”">​</a></h2><ol><li>对比头部发现不一致</li><li>对比尾部发现一直,这里指 oldRight = 10 与 newRight = 10, 尾部指针向前移动;</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>oldLeft = 2;</span></span>
<span class="line"><span>oldRight = 9;</span></span>
<span class="line"><span>newLeft = 9;</span></span>
<span class="line"><span>newRight = 2;</span></span>
<span class="line"><span>[1,2,3,4,5,6,7,8,9,10]</span></span>
<span class="line"><span> [ 1, 9, 11, 7, 3, 4, 5, 6, 2, 10 ]</span></span></code></pre></div><h2 id="第四步-对比头尾" tabindex="-1">第四步 对比头尾 <a class="header-anchor" href="#第四步-对比头尾" aria-label="Permalink to “第四步 对比头尾”">​</a></h2><ol><li>对比头部发现不一致</li><li>对比尾部发现不一致</li><li>对比头尾发现一致, 则将2号位置的dom移动到oldRight之后, oldLeft向后移动一位,newRight向前移动一位</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>oldLeft = 3;</span></span>
<span class="line"><span>oldRight = 9;</span></span>
<span class="line"><span>newLeft = 9;</span></span>
<span class="line"><span>newRight = 6; </span></span>
<span class="line"><span>[1,3,4,5,6,7,8,9,2, 10]</span></span>
<span class="line"><span> [ 1, 9, 11, 7, 3, 4, 5, 6, 2, 10 ]</span></span></code></pre></div><h2 id="第五步-对比尾头" tabindex="-1">第五步 对比尾头, <a class="header-anchor" href="#第五步-对比尾头" aria-label="Permalink to “第五步 对比尾头,”">​</a></h2><ol><li>对比头部发现不一致</li><li>对比尾部发现不一致</li><li>对比头尾发现不一致,对比尾头发现一致, 将 oldRight 复制到 oldLeft前,oldRight向前移动一位, newLeft向前移动一位</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>oldLeft = 3;</span></span>
<span class="line"><span>oldRight = 8;</span></span>
<span class="line"><span>newLeft = 11;</span></span>
<span class="line"><span>newRight = 6;</span></span>
<span class="line"><span>[1,9,3,4,5,6,7,8,2,10]</span></span>
<span class="line"><span> [ 1, 9, 11, 7, 3, 4, 5, 6, 2, 10 ]</span></span></code></pre></div><h2 id="第六步-插入新元素" tabindex="-1">第六步 插入新元素 <a class="header-anchor" href="#第六步-插入新元素" aria-label="Permalink to “第六步 插入新元素”">​</a></h2><ol><li>对比头部发现不一致</li><li>对比尾部发现不一致</li><li>对比头尾发现不一致</li><li>对比尾头发现不一致</li><li>发现新增节点11,则在oldLeft之前插入新元素,其他保持不变</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>oldLeft = 3;</span></span>
<span class="line"><span>oldRight = 8;</span></span>
<span class="line"><span>newLeft = 7;</span></span>
<span class="line"><span>newRight = 6;</span></span>
<span class="line"><span>[1, 9, 11, 3, 4, 5, 6, 7, 8, 2, 10]</span></span>
<span class="line"><span>  1, 9, 11, 7, 3, 4, 5, 6, 2, 10 ]</span></span></code></pre></div><h2 id="第七步-删除节点" tabindex="-1">第七步 删除节点 <a class="header-anchor" href="#第七步-删除节点" aria-label="Permalink to “第七步 删除节点”">​</a></h2><ol><li>对比头部节点发现不一致</li><li>对比尾部节点发现不一致</li><li>对比头尾发现不一致</li><li>对比为头发现不一致</li><li>不是新增节点,也不需要更新, 则删除节点, oldRight向前移动一位</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>oldLeft = 3;</span></span>
<span class="line"><span>oldRight = 7;</span></span>
<span class="line"><span>newLeft = 7;</span></span>
<span class="line"><span>newRight = 6</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[ 1, 9, 11, 3, 4, 5, 6, 7, 2, 10]</span></span>
<span class="line"><span>[ 1, 9, 11, 7, 3, 4, 5, 6, 2, 10 ]</span></span></code></pre></div><h2 id="第八步-为头节点相同" tabindex="-1">第八步 为头节点相同 <a class="header-anchor" href="#第八步-为头节点相同" aria-label="Permalink to “第八步 为头节点相同”">​</a></h2><p>将尾部节点制动到oldLeft, oldLeft指向不变</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>oldLeft = 3;</span></span>
<span class="line"><span>oldRight = 6;</span></span>
<span class="line"><span>newLeft = 3;</span></span>
<span class="line"><span>newRight = 6;</span></span>
<span class="line"><span>[ 1, 9, 11, 7, 3, 4, 5, 6, 2, 10]</span></span>
<span class="line"><span>[ 1, 9, 11, 7, 3, 4, 5, 6, 2, 10 ]</span></span></code></pre></div><h2 id="第九步-对比头部-发现一致走完算法流程" tabindex="-1">第九步 对比头部,发现一致走完算法流程 <a class="header-anchor" href="#第九步-对比头部-发现一致走完算法流程" aria-label="Permalink to “第九步 对比头部,发现一致走完算法流程”">​</a></h2><p>参考:</p>`,33)]))}const k=s(l,[["render",p]]);export{g as __pageData,k as default};
