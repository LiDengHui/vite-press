import{F as e,b as t,m as n,p as r}from"./chunks/plugin-vue_export-helper.TNYQ6xSD.js";const i=JSON.parse(`{"title":"Electron çƒ­æ›´æ–°","description":"","frontmatter":{},"headers":[],"relativePath":"å·¥ç¨‹åŒ–/Electron/Electron çƒ­æ›´æ–°.md","filePath":"å·¥ç¨‹åŒ–/Electron/Electron çƒ­æ›´æ–°.md","lastUpdated":1755860874000}`),a={name:`å·¥ç¨‹åŒ–/Electron/Electron çƒ­æ›´æ–°.md`};function o(t,i,a,o,s,c){return e(),n(`div`,null,i[0]||=[r(`<h1 id="electron-çƒ­æ›´æ–°" tabindex="-1">Electron çƒ­æ›´æ–° <a class="header-anchor" href="#electron-çƒ­æ›´æ–°" aria-label="Permalink to â€œElectron çƒ­æ›´æ–°â€">â€‹</a></h1><p>Electron åº”ç”¨å®ç°åœ¨çº¿æ›´æ–°ï¼ˆä¹Ÿç§°ä¸ºçƒ­æ›´æ–°ï¼‰ï¼Œèƒ½è®©ä½ çš„åº”ç”¨åœ¨ä¸éœ€è¦ç”¨æˆ·é‡æ–°ä¸‹è½½å®Œæ•´å®‰è£…åŒ…çš„æƒ…å†µä¸‹ï¼Œè·å–æ–°åŠŸèƒ½æˆ–ä¿®å¤é—®é¢˜ï¼Œæ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒã€‚ç›®å‰ä¸»æµçš„å®ç°æ–¹å¼æœ‰ <strong>ä½¿ç”¨ electron-updater æ¨¡å—</strong>ã€<strong>ä¾æ‰˜ Electron å†…ç½®çš„ autoUpdater æ¨¡å—</strong>ç­‰æ–¹æ¡ˆã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å‡ ç§ä¸»è¦æ–¹å¼çš„ç‰¹ç‚¹ï¼š</p><table tabindex="0"><thead><tr><th style="text-align:left;">æ›´æ–°æ–¹å¼</th><th style="text-align:left;">ä¼˜ç‚¹</th><th style="text-align:left;">ç¼ºç‚¹</th><th style="text-align:left;">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>electron-updater</strong></td><td style="text-align:left;">åŠŸèƒ½ä¸°å¯Œï¼Œæ”¯æŒå¢é‡æ›´æ–°ï¼Œä¸ electron-builder é›†æˆåº¦é«˜</td><td style="text-align:left;">éœ€è¦é…ç½®æ‰“åŒ…å·¥å…· (å¦‚ electron-builder)</td><td style="text-align:left;">å¤§å¤šæ•°å•†ä¸šé¡¹ç›®ï¼Œå°¤å…¶æ˜¯éœ€è¦ç¨³å®šã€å¯é æ›´æ–°æµç¨‹å’Œå¯èƒ½æ¶‰åŠå¤§é‡æ–‡ä»¶å˜åŠ¨çš„é¡¹ç›®</td></tr><tr><td style="text-align:left;"><strong>å†…ç½® autoUpdater</strong></td><td style="text-align:left;">Electron åŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤–å®‰è£…</td><td style="text-align:left;">ä¸åŒå¹³å°è¡Œä¸ºä¸ä¸€ï¼ˆmacOS éœ€ç­¾åï¼‰ï¼Œéœ€è‡ªå»ºæ›´æ–°æœåŠ¡å™¨å¹¶æä¾›ç‰¹å®šæ ¼å¼çš„æ›´æ–°ä¿¡æ¯</td><td style="text-align:left;">å¯¹æ›´æ–°æµç¨‹æœ‰é«˜åº¦å®šåˆ¶éœ€æ±‚ï¼Œæ„¿æ„è‡ªè¡Œå¤„ç†å„å¹³å°å·®å¼‚å’ŒæœåŠ¡å™¨é€»è¾‘çš„é¡¹ç›®</td></tr><tr><td style="text-align:left;"><strong>æ‰‹åŠ¨å®ç°çƒ­æ›´æ–°</strong></td><td style="text-align:left;">æåº¦çµæ´»ï¼Œå¯æ§æ€§å¼ºï¼Œå¯åªæ›´æ–°æ¸²æŸ“è¿›ç¨‹ç›¸å…³æ–‡ä»¶</td><td style="text-align:left;">å®ç°å¤æ‚ï¼Œéœ€è‡ªè¡Œå¤„ç†ç‰ˆæœ¬å¯¹æ¯”ã€ä¸‹è½½ã€æ›¿æ¢ã€æ ¡éªŒç­‰æ‰€æœ‰ç¯èŠ‚ï¼Œå¯é æ€§éœ€è‡ªè¡Œä¿éšœ</td><td style="text-align:left;">æ›´æ–°å†…å®¹æå°‘ï¼ˆå¦‚ä»…ä¿®æ”¹ HTML/CSS/JSï¼‰ã€å¸Œæœ›æ·±åº¦å®šåˆ¶æ›´æ–°é€»è¾‘æˆ–å­¦ä¹ ç ”ç©¶</td></tr><tr><td style="text-align:left;"><strong>update-electron-app</strong></td><td style="text-align:left;">è®¾ç½®ç®€å•ï¼Œæ— éœ€è‡ªå»ºæœåŠ¡å™¨ï¼ˆä½¿ç”¨ Electron å®˜æ–¹æœåŠ¡ï¼‰ï¼Œé€‚åˆå¼€æºé¡¹ç›®</td><td style="text-align:left;">ä»…é€‚ç”¨äºå…¬å¼€çš„ GitHub Releasesï¼ŒåŠŸèƒ½ç›¸å¯¹ç®€å•ï¼Œå¯èƒ½ä¸æ»¡è¶³å¤æ‚éœ€æ±‚</td><td style="text-align:left;">å¼€æºé¡¹ç›®ï¼Œä¸”ç‰ˆæœ¬å‘å¸ƒé€šè¿‡ GitHub Releases è¿›è¡Œ</td></tr></tbody></table><p>â„¹ï¸ <strong>æ³¨æ„</strong>ï¼šæ— è®ºé‡‡ç”¨å“ªç§æ–¹å¼ï¼Œ<strong>åº”ç”¨ç­¾å</strong>å’Œ<strong>ç‰ˆæœ¬ç®¡ç†</strong>éƒ½è‡³å…³é‡è¦ã€‚åº”ç”¨å¿…é¡»æœ‰æœ‰æ•ˆç­¾åï¼Œå¦åˆ™æ›´æ–°åå¯èƒ½æ— æ³•è¿è¡Œæˆ–è¢«æ€æ¯’è½¯ä»¶è¯¯æŠ¥ã€‚ç‰ˆæœ¬å·åº”éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemantic Versioningï¼‰ï¼Œä»¥ä¾¿æ­£ç¡®åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°ã€‚</p><h3 id="ğŸ”§-æ–¹æ¡ˆä¸€-ä½¿ç”¨-electron-updater-æ¨è" tabindex="-1">ğŸ”§ æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ electron-updaterï¼ˆæ¨èï¼‰ <a class="header-anchor" href="#ğŸ”§-æ–¹æ¡ˆä¸€-ä½¿ç”¨-electron-updater-æ¨è" aria-label="Permalink to â€œğŸ”§ æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ electron-updaterï¼ˆæ¨èï¼‰â€">â€‹</a></h3><p><a href="https://www.npmjs.com/package/electron-updater" target="_blank" rel="noreferrer">electron-updater</a> æ˜¯ electron-builder å†…ç½®çš„æ¨¡å—ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒ**è‡ªåŠ¨å·®åˆ†æ›´æ–° **ï¼ˆdelta updatesï¼‰ï¼Œåªéœ€ä¸‹è½½å˜æ›´éƒ¨åˆ†ï¼ŒèŠ‚çœç”¨æˆ·æµé‡å’Œæ—¶é—´ã€‚</p><ol><li><p><strong>å®‰è£…ä¸é…ç½®</strong> å¦‚æœä½ åœ¨ä½¿ç”¨ electron-builderï¼Œé€šå¸¸å·²ç»å†…ç½®ã€‚å¦åˆ™ï¼Œç¡®ä¿å·²å®‰è£… electron-builderï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> electron-builder</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save-dev</span></span></code></pre></div></li><li><p><strong>ä¸»è¿›ç¨‹é…ç½®</strong> åœ¨ä¸»è¿›ç¨‹æ–‡ä»¶ï¼ˆå¦‚ <code>main.js</code>ï¼‰ä¸­å¼•å…¥å¹¶é…ç½®ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BrowserWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ipcMain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;electron&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">autoUpdater</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;electron-updater&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨æ„ï¼šä» electron-updater å¼•å…¥ï¼Œè€Œé electron è‡ªå¸¦æ¨¡å—</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿æŒçª—å£å¯¹è±¡çš„å…¨å±€å¼•ç”¨, é¿å…è¢«åƒåœ¾å›æ”¶æ—¶çª—å£è‡ªåŠ¨å…³é—­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mainWindow;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆ›å»ºæµè§ˆå™¨çª—å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainWindow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BrowserWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ width: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, webPreferences: { nodeIntegration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, contextIsolation: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åŠ è½½åº”ç”¨çš„ index.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;index.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¼€å‘ç¯å¢ƒä¸‹å¯èƒ½éœ€è¦è®¾ç½®ä¸€äº›è°ƒè¯•æˆ–ç‰¹æ®Šé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;development&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¾‹å¦‚ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹æŒ‡å‘ä¸€ä¸ªæœ¬åœ°æ‰“åŒ…åçš„æ›´æ–°é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼Œè§£å†³å¼€å‘ç¯å¢ƒæ‰¾ä¸åˆ°æ›´æ–°é…ç½®çš„é—®é¢˜ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // autoUpdater.updateConfigPath = path.join(__dirname, &#39;../dev-app-update.yml&#39;);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å…·ä½“è·¯å¾„æ ¹æ®ä½ çš„é¡¹ç›®ç»“æ„è°ƒæ•´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¯é€‰ï¼šæ£€æŸ¥æ›´æ–°ï¼ˆåº”ç”¨å¯åŠ¨åç«‹å³æ£€æŸ¥ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkForUpdatesAndNotify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">whenReady</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(createWindow);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®æ›´æ–°æœåŠ¡å™¨çš„ URL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¦‚æœä½ ä½¿ç”¨ electron-builder é…ç½®çš„ publish å­—æ®µï¼Œé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ setFeedURL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½†å¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ï¼Œå¯ä»¥è¿™æ ·åšï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// autoUpdater.setFeedURL({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   provider: &#39;generic&#39;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   url: &#39;https://your-update-server.com/updates&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ä½ çš„æ›´æ–°æœåŠ¡å™¨åœ°å€ï¼Œéœ€æä¾› latest.yml ç­‰æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬æ›´æ–°äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update-available&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å½“å‘ç°æœ‰å¯ç”¨æ›´æ–°æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Update available.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¯ä»¥å‘é€äº‹ä»¶åˆ°æ¸²æŸ“è¿›ç¨‹ï¼Œæç¤ºç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainWindow.webContents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update_available&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update-downloaded&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ›´æ–°ä¸‹è½½å®Œæ¯•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Update downloaded.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å‘é€äº‹ä»¶åˆ°æ¸²æŸ“è¿›ç¨‹ï¼Œæç¤ºç”¨æˆ·å‡†å¤‡é‡å¯å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainWindow.webContents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update_downloaded&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä½ ä¹Ÿå¯ä»¥é€‰æ‹©è‡ªåŠ¨é€€å‡ºå¹¶å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // autoUpdater.quitAndInstall();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ›´æ–°è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Error in auto-updater.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainWindow.webContents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update_error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;download-progress&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">progressObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä¸‹è½½è¿›åº¦ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Download speed: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> progressObj.bytesPerSecond;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  log_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39; - Downloaded &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> progressObj.percent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  log_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39; (&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> progressObj.transferred </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> progressObj.total </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(log_message);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å‘é€ä¸‹è½½è¿›åº¦åˆ°æ¸²æŸ“è¿›ç¨‹ï¼Œç”¨äºæ˜¾ç¤ºè¿›åº¦æ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainWindow.webContents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;download_progress&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, progressObj);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šè¿‡ IPC æ¥æ”¶æ¸²æŸ“è¿›ç¨‹çš„æ£€æŸ¥æ›´æ–°æˆ–å®‰è£…æ›´æ–°çš„è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ipcMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;restart_app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">quitAndInstall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…¶ä»–åº”ç”¨ç”Ÿå‘½å‘¨æœŸä»£ç ...</span></span></code></pre></div></li><li><p><strong>æ¸²æŸ“è¿›ç¨‹äº¤äº’</strong> åœ¨æ¸²æŸ“è¿›ç¨‹ï¼ˆå¦‚ä½ çš„ç½‘é¡µ UIï¼‰ä¸­ï¼Œå¯ä»¥é€šè¿‡ IPC ä¸ä¸»è¿›ç¨‹é€šä¿¡ï¼Œå‘ç”¨æˆ·å±•ç¤ºæ›´æ–°çŠ¶æ€å’Œè§¦å‘æ“ä½œï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ipcRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;electron&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬ä¸»è¿›ç¨‹å‘é€çš„æ›´æ–°äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update_available&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å‘ŠçŸ¥ç”¨æˆ·æœ‰æ›´æ–°å¯ç”¨ï¼Œæ˜¯å¦ä¸‹è½½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">confirm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`ç‰ˆæœ¬ \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} å¯ç”¨ï¼æ˜¯å¦ç°åœ¨ä¸‹è½½ï¼Ÿ\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¦‚æœéœ€è¦ç”¨æˆ·ç¡®è®¤åæ‰å¼€å§‹ä¸‹è½½ï¼Œå¯ä»¥é€šè¿‡ IPC é€šçŸ¥ä¸»è¿›ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ipcRenderer.send(&#39;start_download&#39;); ä¸»è¿›ç¨‹éœ€ç›‘å¬æ­¤äº‹ä»¶å¹¶è°ƒç”¨ autoUpdater.downloadUpdate()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update_downloaded&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å‘ŠçŸ¥ç”¨æˆ·æ›´æ–°å·²ä¸‹è½½å®Œæˆï¼Œæ˜¯å¦é‡å¯åº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">confirm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ›´æ–°å·²ä¸‹è½½ï¼Œæ˜¯å¦ç«‹å³é‡å¯åº”ç”¨ï¼Ÿ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;restart_app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;download_progress&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">progressObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ›´æ–°è¿›åº¦æ¡ UI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> progressBar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update-progress&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> progressPercent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;progress-percent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  progressBar.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> progressObj.percent;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  progressPercent.innerText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`ä¸‹è½½ä¸­: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Math</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">floor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">progressObj</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">percent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}%\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update_error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ›´æ–°å‡ºé”™:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è‡ªåŠ¨æ›´æ–°å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•ã€‚&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‰é’®ç‚¹å‡»æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;check-for-updates&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;check_for_updates&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸»è¿›ç¨‹éœ€ç›‘å¬æ­¤äº‹ä»¶å¹¶è°ƒç”¨ autoUpdater.checkForUpdates()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div></li><li><p><strong>æ‰“åŒ…ä¸å‘å¸ƒ</strong> åœ¨ <code>package.json</code> ä¸­é…ç½® electron-builder çš„ <code>publish</code> å­—æ®µï¼Œå‘ŠçŸ¥æ‰“åŒ…å·¥å…·å¦‚ä½•å‘å¸ƒç‰ˆæœ¬å’Œç”Ÿæˆæ›´æ–°ä¿¡æ¯ï¼š</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;appId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.yourcompany.yourapp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;productName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YourApp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;directories&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;output&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;publish&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;provider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¹Ÿå¯ä»¥æ˜¯ &#39;github&#39;, &#39;s3&#39; ç­‰</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://your-update-server.com/updates/&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æ›´æ–°æ–‡ä»¶å­˜æ”¾çš„åŸºç¡€ URL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä½¿ç”¨ electron-builder æ‰“åŒ…æ—¶ï¼Œå®ƒä¼šç”Ÿæˆ <code>latest.yml</code>ï¼ˆæˆ– <code>latest-mac.yml</code> ç­‰ï¼‰ã€<code>blockmap</code> ç­‰æ–‡ä»¶ã€‚ä½ éœ€è¦* <em>å°†è¿™äº›æ–‡ä»¶è¿åŒæ‰“åŒ…ç”Ÿæˆçš„å®‰è£…ç¨‹åºï¼ˆå¦‚ <code>.exe</code>, <code>.dmg</code>, <code>.AppImage</code>ï¼‰ä¸€èµ·ä¸Šä¼ åˆ°ä½ çš„æ›´æ–°æœåŠ¡å™¨</em>*ï¼ˆ<code>publish</code> ä¸­ <code>url</code> æ‰€æŒ‡å‘çš„åœ°å€ï¼‰ã€‚</p></li></ol><h3 id="ğŸŒ-æ–¹æ¡ˆäºŒ-ä½¿ç”¨-electron-å†…ç½®çš„-autoupdater-æ¨¡å—" tabindex="-1">ğŸŒ æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ Electron å†…ç½®çš„ autoUpdater æ¨¡å— <a class="header-anchor" href="#ğŸŒ-æ–¹æ¡ˆäºŒ-ä½¿ç”¨-electron-å†…ç½®çš„-autoupdater-æ¨¡å—" aria-label="Permalink to â€œğŸŒ æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ Electron å†…ç½®çš„ autoUpdater æ¨¡å—â€">â€‹</a></h3><p>Electron æœ¬èº«æä¾›äº† <a href="https://www.electronjs.org/docs/latest/api/auto-updater" target="_blank" rel="noreferrer"><code>autoUpdater</code></a> æ¨¡å—ï¼Œä½†å…¶æœ¬èº«* <em>åªè´Ÿè´£æ£€æŸ¥æ›´æ–°ã€ä¸‹è½½å’Œå®‰è£…</em>*ï¼Œéœ€è¦ä½ <strong>è‡ªè¡Œæ­å»ºæ›´æ–°æœåŠ¡å™¨</strong>å¹¶æä¾›ç‰¹å®šæ ¼å¼çš„æ›´æ–°ä¿¡æ¯ã€‚</p><ol><li><p><strong>ä¸»è¿›ç¨‹é…ç½®</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">autoUpdater</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;electron&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨æ„ï¼šè¿™é‡Œæ˜¯ Electron è‡ªå¸¦çš„æ¨¡å—</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®æ›´æ–°æœåŠ¡å™¨çš„ URLï¼ŒURL åº”æŒ‡å‘ä¸€ä¸ªæä¾›æ›´æ–°ä¿¡æ¯çš„ JSON æ–‡ä»¶ï¼ˆå¦‚ updates.jsonï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFeedURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://your-update-server.com/updates?version=&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&amp;platform=&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process.platform</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ£€æŸ¥æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkForUpdates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬äº‹ä»¶ï¼ˆä¸ electron-updater ç±»ä¼¼ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update-available&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Update available.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update-downloaded&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">releaseNotes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">releaseName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">releaseDate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">updateUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">quitAndUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Update downloaded.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æç¤ºç”¨æˆ·é‡å¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">quitAndInstall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆ–è€…è®©ç”¨æˆ·é€‰æ‹©æ—¶æœº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Error in auto-updater.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div></li><li><p><strong>æ­å»ºæ›´æ–°æœåŠ¡å™¨</strong> ä½ éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚ï¼ˆé€šå¸¸åŒ…å«å½“å‰ç‰ˆæœ¬å’Œå¹³å°ï¼‰è¿”å›ä¸€ä¸ª <a href="https://github.com/Squirrel" target="_blank" rel="noreferrer">Squirrel</a> å…¼å®¹çš„ JSON å“åº”ã€‚ä¾‹å¦‚ï¼Œå¯¹äº Windows (<code>url</code> å‚æ•°ä¸­ <code>platform=win32</code>)ï¼Œè¿”å›å†…å®¹å¯èƒ½ç±»ä¼¼ï¼š</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://your-update-server.com/releases/YourApp-1.2.0-full.nupkg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.2.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;notes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¿®å¤äº†è‹¥å¹²é—®é¢˜ï¼Œå¢åŠ äº†æ–°åŠŸèƒ½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;pub_date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2023-04-01T12:00:00.000Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æœåŠ¡å™¨éœ€è¦æ ¹æ®è¯·æ±‚çš„ç‰ˆæœ¬å·åˆ¤æ–­æ˜¯å¦æœ‰æ›´æ–°ï¼Œå¹¶è¿”å›å¯¹åº”æ–°ç‰ˆå®‰è£…åŒ…ï¼ˆå¦‚ <code>.nupkg</code> for Windows, <code>.zip</code> for macOSï¼‰çš„ä¿¡æ¯ã€‚macOS è¿˜éœ€å¤„ç† <code>RELEASES</code> æ–‡ä»¶ã€‚</p></li></ol><h3 id="ğŸ“-æ–¹æ¡ˆä¸‰-æ‰‹åŠ¨å®ç°çƒ­æ›´æ–°-é€‚ç”¨äºæ¸²æŸ“è¿›ç¨‹" tabindex="-1">ğŸ“ æ–¹æ¡ˆä¸‰ï¼šæ‰‹åŠ¨å®ç°çƒ­æ›´æ–°ï¼ˆé€‚ç”¨äºæ¸²æŸ“è¿›ç¨‹ï¼‰ <a class="header-anchor" href="#ğŸ“-æ–¹æ¡ˆä¸‰-æ‰‹åŠ¨å®ç°çƒ­æ›´æ–°-é€‚ç”¨äºæ¸²æŸ“è¿›ç¨‹" aria-label="Permalink to â€œğŸ“ æ–¹æ¡ˆä¸‰ï¼šæ‰‹åŠ¨å®ç°çƒ­æ›´æ–°ï¼ˆé€‚ç”¨äºæ¸²æŸ“è¿›ç¨‹ï¼‰â€">â€‹</a></h3><p>å¦‚æœä½ çš„æ›´æ–°<strong>åªæ¶‰åŠæ¸²æŸ“è¿›ç¨‹çš„ä»£ç </strong>ï¼ˆHTML, CSS, JSï¼‰ä¸”<strong>ä¸»è¿›ç¨‹ä»£ç æœªå˜åŒ–</strong>ï¼Œå¯ä»¥è€ƒè™‘æ›´è½»é‡çš„æ‰‹åŠ¨çƒ­æ›´æ–°ã€‚</p><ol><li><p><strong>åŸç†</strong>ï¼šåº”ç”¨å¯åŠ¨æ—¶æˆ–å®šæœŸä»è¿œç¨‹æœåŠ¡å™¨ï¼ˆå¦‚ GitHub Raw Contentã€è‡ªå»º CDNï¼‰<strong>æ£€æŸ¥ä¸€ä¸ªç‰ˆæœ¬æè¿°æ–‡ä»¶</strong>ï¼ˆå¦‚ <code>package.json</code> æˆ–è‡ªå®šä¹‰çš„ <code>version.json</code>ï¼‰ã€‚<strong>æ¯”è¾ƒè¿œç¨‹ç‰ˆæœ¬ä¸æœ¬åœ°ç‰ˆæœ¬</strong>ã€‚å¦‚æœè¿œç¨‹ç‰ˆæœ¬æ›´æ–°ï¼Œåˆ™<strong>é€ä¸ªä¸‹è½½æœ‰å˜åŠ¨çš„æ¸²æŸ“è¿›ç¨‹æ–‡ä»¶</strong>ï¼ˆæˆ–ä¸€ä¸ªå¢é‡åŒ…ï¼‰åˆ°ä¸´æ—¶ç›®å½•ï¼Œ <strong>éªŒè¯åè¦†ç›–</strong>æœ¬åœ°æ–‡ä»¶ï¼Œæœ€å<strong>åˆ·æ–°é¡µé¢</strong>æˆ–<strong>æç¤ºç”¨æˆ·é‡å¯æ¸²æŸ“è¿›ç¨‹</strong>ã€‚</p></li><li><p><strong>ç®€å•ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨æ¸²æŸ“è¿›ç¨‹æˆ–ä¸»è¿›ç¨‹ä¸­ï¼ˆéœ€è€ƒè™‘å®‰å…¨æ€§å’Œæƒé™ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkForUpdates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 1. è·å–è¿œç¨‹ç‰ˆæœ¬ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> remoteVersionUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://raw.githubusercontent.com/yourusername/yourrepo/master/version.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  https.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(remoteVersionUrl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;?t=&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ æ—¶é—´æˆ³é¿å…ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;end&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> remoteInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> localVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./package.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).version; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æœ¬åœ°ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 2. æ¯”è¾ƒç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNewerVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(remoteInfo.version, localVersion)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3. ä¸‹è½½æ›´æ–°æ–‡ä»¶åˆ—è¡¨ä¸­çš„æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        downloadUpdateFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(remoteInfo.files); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// remoteInfo.files å¯èƒ½æ˜¯ä¸€ä¸ªéœ€è¦æ›´æ–°çš„æ–‡ä»¶åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Failed to check for updates:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isNewerVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">remote</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ç®€å•çš„ç‰ˆæœ¬æ¯”è¾ƒé€»è¾‘ï¼Œå¯ä½¿ç”¨ semver åº“æ›´ä¸¥è°¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> remoteParts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> remote.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Number);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> localParts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> local.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Number);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(remoteParts.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, localParts.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> remoteParts[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> localParts[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> l) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> l) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> downloadUpdateFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filesToUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  filesToUpdate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> remoteFileUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`https://raw.githubusercontent.com/yourusername/yourrepo/master/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filePath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> localFilePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, filePath);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åˆ›å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(localFilePath), { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    https.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(remoteFileUrl, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setEncoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;end&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å°†æ›´æ–°æ–‡ä»¶å†™å…¥ä¸´æ—¶ä½ç½®ï¼Œå…¨éƒ¨æˆåŠŸåè¿›è¡Œæ›¿æ¢ï¼ˆæœ€å¥½æœ‰æ ¡éªŒï¼Œå¦‚å“ˆå¸Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tempFilePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> localFilePath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.tmp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tempFilePath, fileData);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // éªŒè¯æ–‡ä»¶å®Œæ•´æ€§ï¼ˆå¯é€‰ä½†æ¨èï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // if (validateFile(tempFilePath)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">renameSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tempFilePath, localFilePath); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŸå­æ›¿æ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Updated: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filePath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // æ‰€æœ‰æ–‡ä»¶æ›´æ–°å®Œæˆåï¼Œæç¤ºç”¨æˆ·åˆ·æ–°æˆ–åº”ç”¨å·²è‡ªåŠ¨æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Failed to download \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filePath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkForUpdates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šæ­¤æ–¹æ³•<strong>å®‰å…¨æ€§è¾ƒä½</strong>ï¼Œéœ€è¦è°¨æ…å¤„ç†æ–‡ä»¶ä¸‹è½½å’Œè¦†ç›–ï¼Œé¿å…å®‰å…¨æ¼æ´ã€‚<strong>ä»…é€‚ç”¨äºç®€å•åœºæ™¯</strong>ã€‚</p></li></ol><h3 id="ğŸ’-æ–¹æ¡ˆå››-ä½¿ç”¨-update-electron-app-é’ˆå¯¹å¼€æºé¡¹ç›®" tabindex="-1">ğŸ’ æ–¹æ¡ˆå››ï¼šä½¿ç”¨ update-electron-appï¼ˆé’ˆå¯¹å¼€æºé¡¹ç›®ï¼‰ <a class="header-anchor" href="#ğŸ’-æ–¹æ¡ˆå››-ä½¿ç”¨-update-electron-app-é’ˆå¯¹å¼€æºé¡¹ç›®" aria-label="Permalink to â€œğŸ’ æ–¹æ¡ˆå››ï¼šä½¿ç”¨ update-electron-appï¼ˆé’ˆå¯¹å¼€æºé¡¹ç›®ï¼‰â€">â€‹</a></h3><p>å¦‚æœä½ çš„ Electron åº”ç”¨æ˜¯<strong>å¼€æºé¡¹ç›®</strong>ï¼Œå¹¶ä¸”ä½¿ç”¨ <strong>GitHub Releases</strong> å‘å¸ƒç‰ˆæœ¬ï¼Œå¯ä»¥è€ƒè™‘ Electron å®˜æ–¹æä¾›çš„ <a href="https://github.com/electron/update-electron-app" target="_blank" rel="noreferrer"><code>update-electron-app</code></a> æ¨¡å—ã€‚</p><ol><li><p><strong>å®‰è£…</strong>ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update-electron-app</span></span></code></pre></div></li><li><p><strong>ä½¿ç”¨</strong>ï¼š åœ¨ä¸»è¿›ç¨‹çš„ä»»ä½•åœ°æ–¹è°ƒç”¨ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update-electron-app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)();</span></span></code></pre></div><p>è¯¥æ¨¡å—ä¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶å’Œä¹‹åæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆå¦‚10åˆ†é’Ÿï¼‰è‡ªåŠ¨æ£€æŸ¥æ›´æ–°ã€‚å®ƒä½¿ç”¨ GitHub Releases ä¸­çš„ä¿¡æ¯ï¼Œå‘ç°æ›´æ–°åä¼šè‡ªåŠ¨ä¸‹è½½å¹¶åœ¨å°±ç»ªæ—¶æç¤ºç”¨æˆ·ã€‚</p></li></ol><h3 id="âš ï¸-æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜" tabindex="-1">âš ï¸ æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜ <a class="header-anchor" href="#âš ï¸-æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜" aria-label="Permalink to â€œâš ï¸ æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜â€">â€‹</a></h3><ol><li><strong>ä»£ç ç­¾å</strong>ï¼ˆCode Signingï¼‰ï¼š<strong>è‡³å…³é‡è¦</strong>ï¼æ— è®ºæ˜¯ macOS è¿˜æ˜¯ Windowsï¼Œ<strong>æ²¡æœ‰æ­£ç¡®ç­¾åçš„åº”ç”¨å°†æ— æ³•æ­£å¸¸è¿›è¡Œè‡ªåŠ¨æ›´æ–°</strong> ï¼Œç”šè‡³å¯èƒ½æ— æ³•è¿è¡Œã€‚macOS é€šå¸¸éœ€è¦ Apple Developer è¯ä¹¦ï¼ŒWindows åˆ™å¯ä»¥ä½¿ç”¨ä»£ç ç­¾åè¯ä¹¦ï¼ˆå¦‚æ¥è‡ª DigiCert, Sectigo ç­‰ï¼‰ã€‚</li><li><strong>æ›´æ–°æœåŠ¡å™¨é…ç½®</strong>ï¼šç¡®ä¿ä½ çš„æœåŠ¡å™¨æ­£ç¡®æä¾›äº†æ›´æ–°æ–‡ä»¶ï¼ˆå¦‚ <code>latest.yml</code>ï¼‰å¹¶ä¸”å…¶ <strong>MIME ç±»å‹</strong>è®¾ç½®æ­£ç¡®ã€‚ä¾‹å¦‚ï¼Œå¯¹äº <code>.yml</code> æ–‡ä»¶ï¼ŒæœåŠ¡å™¨åº”è¿”å› <code>text/plain</code> æˆ– <code>application/x-yaml</code>ï¼Œå¦åˆ™å®¢æˆ·ç«¯å¯èƒ½æ— æ³•è§£æã€‚</li><li><strong>æƒé™é—®é¢˜</strong>ï¼šåœ¨ macOS å’Œ Linux ä¸Šï¼Œåº”ç”¨ç›®å½•å¯èƒ½æ²¡æœ‰å†™æƒé™ã€‚æ›´æ–°æ–‡ä»¶é€šå¸¸åº”<strong>å…ˆä¸‹è½½åˆ°ä¸´æ—¶ç›®å½•</strong>ï¼ˆå¦‚ <code>app.getPath(&#39;temp&#39;)</code> æˆ– <code>app.getPath(&#39;userData&#39;)</code>ï¼‰ï¼ŒéªŒè¯åå†è¿›è¡Œæ›¿æ¢æ“ä½œã€‚</li><li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰ï¼Œå¹¶ç¡®ä¿æ‰“åŒ…é…ç½®å’ŒæœåŠ¡å™¨ä¸Šçš„ç‰ˆæœ¬ä¿¡æ¯å‡†ç¡®æ— è¯¯ã€‚</li><li><strong>æµ‹è¯•</strong>ï¼šåŠ¡å¿…åœ¨<strong>æ‰€æœ‰ç›®æ ‡å¹³å°</strong>ä¸Šå……åˆ†æµ‹è¯•æ›´æ–°æµç¨‹ï¼ŒåŒ…æ‹¬ä»æ—§ç‰ˆæœ¬å‡çº§åˆ°æ–°ç‰ˆæœ¬ã€ç½‘ç»œä¸­æ–­ã€æ›´æ–°å¤±è´¥å›æ»šç­‰åœºæ™¯ã€‚</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåšå¥½ç½‘ç»œé”™è¯¯ã€æœåŠ¡å™¨é”™è¯¯ã€æ–‡ä»¶æ ¡éªŒå¤±è´¥ç­‰æƒ…å†µçš„å¤„ç†å’Œç”¨æˆ·æç¤ºã€‚</li><li><strong>å¢é‡æ›´æ–°</strong>ï¼šelectron-updater æ”¯æŒç”Ÿæˆå·®åˆ†æ›´æ–°åŒ…ï¼Œå¯ä»¥æ˜¾è‘—å‡å°ä¸‹è½½ä½“ç§¯ã€‚ç¡®ä¿åœ¨ electron-builder é…ç½®ä¸­å¯ç”¨ç›¸å…³åŠŸèƒ½ã€‚</li><li><strong>macOS æ²™ç›’é™åˆ¶</strong>ï¼šå¦‚æœåº”ç”¨å¯ç”¨äº†æ²™ç›’ï¼ˆSandboxï¼‰ï¼Œå¯èƒ½ä¼šå¯¹æ›´æ–°æ“ä½œäº§ç”Ÿé™åˆ¶ï¼Œéœ€è¦ä»”ç»†æµ‹è¯•ã€‚</li></ol><h3 id="ğŸ’-æ€»ç»“" tabindex="-1">ğŸ’ æ€»ç»“ <a class="header-anchor" href="#ğŸ’-æ€»ç»“" aria-label="Permalink to â€œğŸ’ æ€»ç»“â€">â€‹</a></h3><p>é€‰æ‹©å“ªç§æ–¹æ¡ˆä¸»è¦å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼š</p><ul><li><strong>è¿½æ±‚åŠŸèƒ½å®Œå–„ã€çœå¿ƒå¯é </strong>ï¼šç›´æ¥ä½¿ç”¨ <strong>electron-updater</strong> (é…åˆ electron-builder)ã€‚</li><li><strong>åº”ç”¨å¼€æºä¸”å‘å¸ƒåœ¨ GitHub</strong>ï¼šå¯ä»¥å°è¯• <strong>update-electron-app</strong>ã€‚</li><li><strong>éœ€è¦æåº¦å®šåˆ¶åŒ–çš„æ›´æ–°æœåŠ¡å™¨é€»è¾‘</strong>ï¼šç ”ç©¶å†…ç½®çš„ <strong>autoUpdater</strong> å¹¶è‡ªå»ºæœåŠ¡å™¨ã€‚</li><li><strong>ä»…æ›´æ–°æ¸²æŸ“è¿›ç¨‹èµ„æºä¸”å¸Œæœ›è½»é‡</strong>ï¼šå¯ä»¥è€ƒè™‘<strong>æ‰‹åŠ¨çƒ­æ›´æ–°</strong>ï¼Œä½†åŠ¡å¿…æ³¨æ„å®‰å…¨æ€§ã€‚</li></ul>`,22)])}var s=t(a,[[`render`,o]]);export{i as __pageData,s as default};