import{F as e,b as t,m as n,p as r}from"./chunks/plugin-vue_export-helper.CL7LGUog.js";const i=JSON.parse(`{"title":"import.meta 的属性","description":"","frontmatter":{},"headers":[],"relativePath":"语言/JavaScript/Import.meta.md","filePath":"语言/JavaScript/Import.meta.md","lastUpdated":1751078101000}`),a={name:`语言/JavaScript/Import.meta.md`};function o(t,i,a,o,s,c){return e(),n(`div`,null,i[0]||=[r(`<h1 id="import-meta-的属性" tabindex="-1">import.meta 的属性 <a class="header-anchor" href="#import-meta-的属性" aria-label="Permalink to “import.meta 的属性”">​</a></h1><p><code>import.meta</code> 是 ES Modules 的一个元数据对象，用于提供当前模块的上下文信息。它不是一个全局对象，而是每个模块作用域内独立存在的对象。</p><p>在 Node.js 中，<code>import.meta</code> 主要包含以下属性：</p><h2 id="✅-1-import-meta-url" tabindex="-1">✅ 1. <code>import.meta.url</code> <a class="header-anchor" href="#✅-1-import-meta-url" aria-label="Permalink to “✅ 1. import.meta.url”">​</a></h2><ul><li><strong>类型</strong>：<code>string</code></li><li><strong>含义</strong>：当前模块的完整 <code>file://</code> 形式的 URL。</li><li><strong>用途</strong>：可用于获取当前文件路径，替代 CommonJS 中的 <code>__filename</code>。</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 输出: file:///Users/xxx/project/module.mjs</span></span></code></pre></div><h2 id="✅-2-自定义属性-通过-bundler-或-loader-插入" tabindex="-1">✅ 2. 自定义属性（通过 bundler 或 loader 插入） <a class="header-anchor" href="#✅-2-自定义属性-通过-bundler-或-loader-插入" aria-label="Permalink to “✅ 2. 自定义属性（通过 bundler 或 loader 插入）”">​</a></h2><p>某些构建工具（如 <strong>Vite、Rollup、Webpack5+</strong>）会注入额外的 <code>import.meta</code> 属性。例如：</p><h3 id="vite-示例" tabindex="-1">Vite 示例： <a class="header-anchor" href="#vite-示例" aria-label="Permalink to “Vite 示例：”">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 包含环境变量，如 import.meta.env.MODE</span></span></code></pre></div><h3 id="webpack-示例-需要配置-experiments-outputmodule-true" tabindex="-1">Webpack 示例（需要配置 <code>experiments.outputModule: true</code>）： <a class="header-anchor" href="#webpack-示例-需要配置-experiments-outputmodule-true" aria-label="Permalink to “Webpack 示例（需要配置 experiments.outputModule: true）：”">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.webpack </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true if the module is bundled by Webpack</span></span></code></pre></div><h2 id="✅-3-在浏览器中-仅支持-es-module" tabindex="-1">✅ 3. 在浏览器中（仅支持 ES Module） <a class="header-anchor" href="#✅-3-在浏览器中-仅支持-es-module" aria-label="Permalink to “✅ 3. 在浏览器中（仅支持 ES Module）”">​</a></h2><p>浏览器支持标准的 <code>import.meta.url</code>，但也可用于传递上下文信息。某些 polyfill 或工具也会注入额外字段。</p><hr><h2 id="🚫-import-meta-不支持的内容-在标准环境中" tabindex="-1">🚫 <code>import.meta</code> 不支持的内容（在标准环境中）： <a class="header-anchor" href="#🚫-import-meta-不支持的内容-在标准环境中" aria-label="Permalink to “🚫 import.meta 不支持的内容（在标准环境中）：”">​</a></h2><ul><li><code>import.meta</code> <strong>不是可扩展对象</strong>，你不能随意添加属性（在严格模式下）。</li><li>不支持像 <code>__dirname</code>、<code>__filename</code> 这样的 CommonJS 属性。</li></ul><h2 id="🌟-补充-如何使用-import-meta-url-获取-dirname-和-filename-如前所示" tabindex="-1">🌟 补充：如何使用 <code>import.meta.url</code> 获取 <code>__dirname</code> 和 <code>__filename</code>（如前所示） <a class="header-anchor" href="#🌟-补充-如何使用-import-meta-url-获取-dirname-和-filename-如前所示" aria-label="Permalink to “🌟 补充：如何使用 import.meta.url 获取 __dirname 和 __filename（如前所示）”">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fileURLToPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fileURLToPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __dirname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span></code></pre></div><h2 id="🔧-小技巧-在构建工具中调试-import-meta" tabindex="-1">🔧 小技巧：在构建工具中调试 <code>import.meta</code> <a class="header-anchor" href="#🔧-小技巧-在构建工具中调试-import-meta" aria-label="Permalink to “🔧 小技巧：在构建工具中调试 import.meta”">​</a></h2><p>如果你不确定有哪些字段：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>有时你会看到：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file:///xxx/module.mjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>在 Vite 项目中：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;BASE_URL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;MODE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;development&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;DEV&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;PROD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>需要我列出某个特定工具（如 Vite/Webpack）中 <code>import.meta</code> 的可用字段吗？</p>`,27)])}var s=t(a,[[`render`,o]]);export{i as __pageData,s as default};