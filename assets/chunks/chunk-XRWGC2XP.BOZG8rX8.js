import{b as e,c as t,h as n,l as r,m as i,n as a,o,p as s,q as c}from"./chunk-4KMFLZZN.BhKGqL__.js";var l=class extends e{static#_=i(this,`TreemapTokenBuilder`);constructor(){super([`treemap`])}},u=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/,d=class extends t{static#_=i(this,`TreemapValueConverter`);runCustomConverter(e,t,n){if(e.name===`NUMBER2`)return parseFloat(t.replace(/,/g,``));if(e.name===`SEPARATOR`||e.name===`STRING2`)return t.substring(1,t.length-1);if(e.name===`INDENTATION`)return t.length;if(e.name===`ClassDef`){if(typeof t!=`string`)return t;let e=u.exec(t);if(e)return{$type:`ClassDefStatement`,className:e[1],styleText:e[2]||void 0}}}};function f(e){let t=e.validation.TreemapValidator,n=e.validation.ValidationRegistry;if(n){let e={Treemap:t.checkSingleRoot.bind(t)};n.register(e,t)}}i(f,`registerValidationChecks`);var p=class{static#_=i(this,`TreemapValidator`);checkSingleRoot(e,t){let n;for(let r of e.TreemapRows){if(!r.item)continue;n===void 0&&r.indent===void 0?n=0:(r.indent===void 0||n!==void 0&&n>=parseInt(r.indent,10))&&t(`error`,`Multiple root nodes are not allowed in a treemap.`,{node:r,property:`item`})}}},m={parser:{TokenBuilder:i(()=>new l,`TokenBuilder`),ValueConverter:i(()=>new d,`ValueConverter`)},validation:{TreemapValidator:i(()=>new p,`TreemapValidator`)}};function h(e=a){let t=o(c(e),n),i=o(s({shared:t}),r,m);return t.ServiceRegistry.register(i),f(i),{shared:t,Treemap:i}}i(h,`createTreemapServices`);export{m as b,h as c};