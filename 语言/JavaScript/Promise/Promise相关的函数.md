# Promise ç›¸å…³çš„å‡½æ•°
ä»¥ä¸‹æ˜¯æ•´ç†åçš„ Promise ç›¸å…³æ–¹æ³• Markdown è¡¨æ ¼ï¼ŒåŒ…å«ä¼ ç»Ÿæ–¹æ³•å’Œæ–°å¢æ–¹æ³•ï¼š

### ğŸ“Š Promise æ ¸å¿ƒæ–¹æ³•æ€»è§ˆ

| **æ–¹æ³•å**                         | **ç±»å‹** | **æè¿°**                                                                 | **å‚æ•°**                                      | **è¿”å›å€¼**                                | **ä½¿ç”¨åœºæ™¯**                              |
|------------------------------------|----------|--------------------------------------------------------------------------|-----------------------------------------------|-------------------------------------------|------------------------------------------|
| **åŸºç¡€æ–¹æ³•**                       |          |                                                                          |                                               |                                           |                                          |
| `new Promise(executor)`            | æ„é€ å™¨   | åˆ›å»º Promise å¯¹è±¡                                                        | `executor(resolve, reject)` å‡½æ•°              | Promise å®ä¾‹                              | å°è£…å¼‚æ­¥æ“ä½œ                             |
| `.then(onFulfilled, onRejected?)`  | å®ä¾‹æ–¹æ³• | å¤„ç†æˆåŠŸçŠ¶æ€                                                             | `onFulfilled`: æˆåŠŸå›è°ƒ<br>`onRejected`: å¯é€‰å¤±è´¥å›è°ƒ | æ–° Promise å¯¹è±¡                           | å¼‚æ­¥æµç¨‹é“¾å¼è°ƒç”¨                         |
| `.catch(onRejected)`               | å®ä¾‹æ–¹æ³• | å¤„ç†å¤±è´¥çŠ¶æ€                                                             | `onRejected`: å¤±è´¥å›è°ƒ                        | æ–° Promise å¯¹è±¡                           | é”™è¯¯æ•è·                                 |
| `.finally(onFinally)`              | å®ä¾‹æ–¹æ³• | æ— è®ºæˆåŠŸ/å¤±è´¥éƒ½æ‰§è¡Œ                                                      | `onFinally`: æ— å‚æ•°å›è°ƒ                       | æ–° Promise å¯¹è±¡                           | èµ„æºæ¸…ç†/æ—¥å¿—è®°å½•                        |
| **é™æ€æ–¹æ³•**                       |          |                                                                          |                                               |                                           |                                          |
| `Promise.resolve(value)`           | é™æ€æ–¹æ³• | åˆ›å»ºå·²å®Œæˆçš„ Promise                                                     | ä»»ä½•ç±»å‹å€¼                                    | å·²å®Œæˆçš„ Promise                          | åŒæ­¥å€¼è½¬ Promise                         |
| `Promise.reject(reason)`           | é™æ€æ–¹æ³• | åˆ›å»ºå·²æ‹’ç»çš„ Promise                                                     | é”™è¯¯åŸå›                                       | å·²æ‹’ç»çš„ Promise                          | å¿«é€Ÿè¿”å›é”™è¯¯                             |
| `Promise.all(iterable)`            | é™æ€æ–¹æ³• | æ‰€æœ‰ Promise æˆåŠŸæ—¶è¿”å›ç»“æœæ•°ç»„                                          | Promise å¯è¿­ä»£å¯¹è±¡                            | æ–° Promise å¯¹è±¡                           | å¹¶è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œ                         |
| `Promise.allSettled(iterable)`     | é™æ€æ–¹æ³• | æ‰€æœ‰ Promise å®Œæˆåè¿”å›çŠ¶æ€ç»“æœæ•°ç»„                                      | Promise å¯è¿­ä»£å¯¹è±¡                            | æ–° Promise å¯¹è±¡                           | éœ€è¦æ‰€æœ‰æ“ä½œçš„æœ€ç»ˆçŠ¶æ€                   |
| `Promise.race(iterable)`           | é™æ€æ–¹æ³• | è¿”å›ç¬¬ä¸€ä¸ªå®Œæˆçš„ Promise                                                 | Promise å¯è¿­ä»£å¯¹è±¡                            | æ–° Promise å¯¹è±¡                           | è¶…æ—¶æ§åˆ¶/ç«é€Ÿåœºæ™¯                        |
| `Promise.any(iterable)`            | é™æ€æ–¹æ³• | è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„ Promise                                                 | Promise å¯è¿­ä»£å¯¹è±¡                            | æ–° Promise å¯¹è±¡                           | è·å–æœ€å¿«æˆåŠŸç»“æœ                         |
| **æ–°å¢æ–¹æ³• (ES2024+)**             |          |                                                                          |                                               |                                           |                                          |
| `Promise.try(func)`                | é™æ€æ–¹æ³• | ç»Ÿä¸€åŒ…è£…åŒæ­¥/å¼‚æ­¥å‡½æ•°ï¼Œè‡ªåŠ¨æ•è·é”™è¯¯                                      | `func`: è¦æ‰§è¡Œçš„å‡½æ•°                          | æ–° Promise å¯¹è±¡                           | æ··åˆä»»åŠ¡é“¾/é”™è¯¯å®‰å…¨å°è£…                  |
| `Promise.withResolvers()`          | é™æ€æ–¹æ³• | è¿”å› `{ promise, resolve, reject }` å¯¹è±¡                                 | æ—                                             | è§£æ„å¯¹è±¡                                  | äº‹ä»¶é©±åŠ¨/å¤–éƒ¨æ§åˆ¶çŠ¶æ€                    |

---

### ğŸ” æ–¹æ³•ç‰¹æ€§å¯¹æ¯”è¡¨

| **ç‰¹æ€§**   | `Promise.all()` | `Promise.any()` | `Promise.allSettled()` | `Promise.race()` |
|----------|-----------------|-----------------|------------------------|------------------|
| **æˆåŠŸæ¡ä»¶** | å…¨éƒ¨æˆåŠŸ            | è‡³å°‘ä¸€ä¸ªæˆåŠŸ          | å…¨éƒ¨å®Œæˆ                   | ç¬¬ä¸€ä¸ªå®Œæˆ            |
| **å¤±è´¥æ¡ä»¶** | ä»»ä¸€å¤±è´¥            | å…¨éƒ¨å¤±è´¥            | æ°¸ä¸å¤±è´¥                   | ç¬¬ä¸€ä¸ªå¤±è´¥            |
| **ç»“æœç±»å‹** | å€¼æ•°ç»„             | å•ä¸ªå€¼             | çŠ¶æ€å¯¹è±¡æ•°ç»„                 | å•ä¸ªå€¼/é”™è¯¯           |
| **é”™è¯¯å¤„ç†** | ç«‹å³æ‹’ç»            | AggregateError  | åŒ…å«é”™è¯¯çŠ¶æ€                 | ç«‹å³æ‹’ç»             |
| **é€‚ç”¨åœºæ™¯** | å¼ºä¾èµ–å¹¶è¡Œæ“ä½œ         | è·å–æœ€å¿«æˆåŠŸ          | æ”¶é›†æ‰€æœ‰æ“ä½œçŠ¶æ€               | ç«é€Ÿ/è¶…æ—¶æ§åˆ¶          |

---

### âš¡ æ–°å¢æ–¹æ³•è¯¦è§£

| **æ–¹æ³•**                    | **æ ¸å¿ƒä¼˜åŠ¿**                      | **ç¤ºä¾‹åœºæ™¯**                                                                              |
|---------------------------|-------------------------------|---------------------------------------------------------------------------------------|
| `Promise.try()`           | â€¢ ç»Ÿä¸€åŒæ­¥/å¼‚æ­¥é”™è¯¯å¤„ç†<br>â€¢ è‡ªåŠ¨æ•è·åŒæ­¥å¼‚å¸¸   | ```Promise.try(() => JSON.parse(input)).catch(handleError)```                         |
| `Promise.withResolvers()` | â€¢ å¤–éƒ¨æ§åˆ¶ Promise çŠ¶æ€<br>â€¢ é¿å…å˜é‡æ±¡æŸ“ | ```const {promise, resolve} = Promise.withResolvers()<br>event.on('done', resolve)``` |

---

### ğŸ’ ä½¿ç”¨å»ºè®®
1. **é”™è¯¯å¤„ç†**ï¼šå§‹ç»ˆä½¿ç”¨ `.catch()` æˆ– `try/catch`ï¼ˆasync/awaitï¼‰å¤„ç†æ‹’ç»çŠ¶æ€
2. **èµ„æºæ¸…ç†**ï¼šä½¿ç”¨ `.finally()` ç¡®ä¿èµ„æºé‡Šæ”¾
3. **ç°ä»£ç‰¹æ€§**ï¼šåœ¨æ”¯æŒç¯å¢ƒï¼ˆNode.js 22+ / Chrome 122+ï¼‰ä¼˜å…ˆä½¿ç”¨ `Promise.try()` å’Œ `Promise.withResolvers()`
4. **å¹¶å‘æ§åˆ¶**ï¼š
    - å…¨æˆåŠŸï¼š`Promise.all()`
    - éœ€æ‰€æœ‰ç»“æœï¼š`Promise.allSettled()`
    - æœ€å¿«æˆåŠŸï¼š`Promise.any()`

> å®Œæ•´è§„èŒƒå‚è€ƒï¼š[ECMAScript Promise](https://tc39.es/ecma262/#sec-promise-objects)
